{% extends 'product/base.html' %} 
{% load static %} 

{% block body %}
<div>
      <h2>Units List</h2>
      <div class="row">
        <div class="col-lg-12 sub_main">
          <div class="d-flex mb-3">
            <button class="dropbtn mx-3" onclick="redirectUnitList()"><span>Add Units +</span></button>
            <div class="container-category "> 
             <input class="" type="search" placeholder="Search" aria-label="Search" id="p_search" name="product_search" />
               <a class="px-2 py-2" href="#"><i class="fa-solid fa-magnifying-glass"></i></a>
            </div>
           </div>
          </div>  
        </div>  
        <div class="row">
          <div class="col-lg-5">
            <table class="table table-striped table-hover table-responsive">
              <thead>
                  <tr>
                      <th scope="col" class="name_absolute">No</th>
                      <th scope="col" class="name_absolute">Unit Name
                          <div class="nav-item dropdown unit-list-icons">
                              <a class="nav-link dropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa-solid fa-angle-down"></i></a>
                              <ul class="dropdown-menu">
                                  <li><input type="text" class="dropdown-item input_text" placeholder="Any match.." /></li>
                              </ul>
                          </div>
                      </th>
                      <th scope="col" class="name_absolute">Edit</th>
                      <th scope="col" class="name_absolute">Delete</th>
                  </tr>
              </thead>
          
              <tbody>
                  {% for unit in unit_name_all %}
                  <tr>
                      <td>{{ forloop.counter }}</td>
                      <td>{{unit.unit_name}}</td>
                      <td><a href="{% url 'unit_name-update' unit.id %}"><i class="fa-solid fa-pen-to-square px-1"></i></a></td>
                      <td>{{ unit.unit_name }} <button class="btn btn-danger delete-btn" data-item-id="{{ unit.id }}">Delete</button></td>
                  </tr>
                  {% endfor %}                
              </tbody>
          </table>
              </div>
              
            </div>
         
        </div>
</div>
<!-- Modal HTML -->
<div id="confirmDeleteModal" class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="confirmDeleteLabel">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="confirmDeleteLabel">Confirm Deletion</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              Are you sure you want to delete this item?
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
          </div>
      </div>
  </div>
</div>


<script>
  document.body.appendChild(document.getElementById('confirmDeleteModal'));
  $(document).ready(function(){
      $('.delete-btn').click(function(){
          var itemId = $(this).data('item-id');
          $('#confirmDeleteButton').attr('data-item-id', itemId); // Set the item id to the confirm button's data
          $('#confirmDeleteModal').modal('show');
      });

      // Confirm delete button click event
      $('#confirmDeleteButton').click(function(){
          var itemId = $(this).data('item-id');
          // Redirect to delete view
          window.location.href = '/unitnamedelete/' + itemId;
      });
  });
</script>

<script>
  function redirectUnitList(){
    window.location.href = "{% url 'unit_name-create'%}"
  }
  </script>

{% endblock body %}