{% extends 'product/base.html' %}
{% load static %}

{% block body %}

<input type="file" id="fileInput" multiple>
<button type="button" class="btn" id="edit_color">Add Images<span class=""><i class="fas fa-angle-right arrowBtn"></i></span></button>

<table id="imageTable">
  <tbody>
    <!-- Images will be added here -->
    <tr id="row0">
      <!-- Initial row to append images -->
    </tr>
  </tbody>
</table>

<script>
  // Get the button element
  const button = document.getElementById('edit_color');
  const fileInput = document.getElementById('fileInput');
  const imageTableBody = document.querySelector('#imageTable tbody');

  // Counter for the custom name
  let counter = 1;

  // Add event listener for button click
  button.addEventListener('click', function() {
    // Get selected files from the file input
    const files = fileInput.files;

    // Loop through selected files and create table columns with images
    for (let i = 0; i < files.length; i++) {
      const file = files[i];
      const tableData = document.createElement('td');

      // Create input field for custom name
      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.placeholder = 'Enter image name';
      nameInput.setAttribute('maxlength', '50'); // Limiting to 50 characters for demonstration
      nameInput.value = `Image ${counter}`; // Set the default value with the counter
      tableData.appendChild(nameInput);

      const image = document.createElement('img');
      image.src = URL.createObjectURL(file);
      image.alt = 'Image';
      tableData.appendChild(image);

      // Create a new row if there's no space for more columns
      if (!imageTableBody.lastElementChild || imageTableBody.lastElementChild.children.length >= 5) {
        const newRow = document.createElement('tr');
        newRow.id = `row${imageTableBody.children.length}`;
        imageTableBody.appendChild(newRow);
      }

      imageTableBody.lastElementChild.appendChild(tableData);

      // Increment the counter
      counter++;
    }
  });
</script>

{% endblock body %}