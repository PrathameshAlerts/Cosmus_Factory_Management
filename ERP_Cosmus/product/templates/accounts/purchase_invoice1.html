{% extends 'product/base.html' %} 
{% load static %} 

{% block body %} 
<div>
        <h2>Purchase invoice</h2>
        <form class="mt-5" action="" method="POST">
            {% csrf_token %}
       
        <div class="d-flex mb-3">
            <label for="id_purchase_number"  class="item-form">Purchase No</label>
            <input type="number" class="item-select" name="purchase_number" id ="id_purchase_number" value="{{form.instance.purchase_number}}" maxlength="255" required >
        </div>
        <div class="d-flex mb-3">
            <label for="id_supplier_invoice_number" class="item-form" >Supplier Invoice No</label>
            <input type="number" class="item-select" name="supplier_invoice_number" id ="id_supplier_invoice_number" value="{{form.instance.supplier_invoice_number}}" maxlength="255" required >
        </div>
        <div class="d-flex mb-3">
            <label for="id_ledger_type" class="item-form" >ledger Type</label>
            <p>Purchase</p>       
         </div>
        <div class="d-flex mb-3">
            <label for="id_party_name" class="item-form" >Party A/C Name</label>
            <select class="item-select" name="party_name" required id="id_party_name">
            {% if form.instance.id %}
            {% for x in party_names %}
            <option value="{{x.id}}">{{x.name}}</option>
            {% endfor %}
            {% elif not form.instance.id %}
            <option value=""></option>
            {% endif %}
            {% for x in party_names %}
            <option value="{{x.id}}">{{x.name}}</option>
            {% endfor %}
    
            </select>
        </div>
        
        <button type="button" class="create-btn" id="addRowButton">Add +</button>
    <div class="">
        <table class="table table-striped table-hover table-responsive myTable">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Item Name</th>
                    <th>Colour</th>
                    <th>Shade</th>
                    <th>Quantity</th>
                    <th>Rate</th>
                    <th>Per</th>
                    <th>Amount</th>
                    <th>DELETE</th>
                </tr>
            </thead>
            <tbody>
                {{formset.management_form}}
                {% for forms in formset %}
                {{ shade_form.id }}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td> 
                        <select name="item_name" class="item-select" placeholder="Item Name" required id="item_name">
                            <option value=""></option>
                            {% for item in items %}
                            <option value="{{item.id}}">{{item.item_name}}</option>
                            {% endfor %}
                          </select>
                    </td>
                    <td>
                        <input type="text" name="item_color" id="item_color" class="item-select readonly">
                    </td>
                    <td>
                        <select name="{{forms.prefix}}-item_shade" class="item-select" placeholder="Item Shades" required id="{{forms.prefix}}-item_shade">
                        </select>
                    </td>
                    <td>
                        <input type="text" id="{{forms.prefix}}-quantity_total" class="purchase-input" name="{{forms.prefix}}-quantity_total" value="{{forms.instance.quantity_total}}">
                    </td>
                    <td>
                        <input type="text" id="{{forms.prefix}}-rate" class="purchase-input" name="{{forms.prefix}}-rate" value="{{forms.instance.rate}}">
                    </td>
                    <td>
                        <input type="text" name="item_unit" id="item_unit" class="purchase-input">
                    </td>
                    <td>
                        <input type="text" id="{{forms.prefix}}-amount" class="item-select" name="{{forms.prefix}}-amount" value="{{forms.instance.amount}}" style="border: none;">
                    </td>
                    <td>
                    {{ shade_form.DELETE }}
                    </td>
                 </tr>   
            </tbody>
            {% endfor %}
        </table>
    </div>
        

<div class="table-left">
    <div class="d-flex mb-3">
        <label for="id_fright_transport" class="item-form" >Fright & Transport</label>
        <input type="number" class="item-select" name="fright_transport" id ="id_fright_transport" value="{{form.instance.fright_transport}}" maxlength="50" required >

    </div>
    <div class="d-flex mb-3">
        <label for="id_gross_total" class="item-form" >Gross total</label>
        <input type="number" class="item-select" name="gross_total" id ="id_gross_total" value="{{form.instance.gross_total}}" maxlength="50" required > 
    </div>
    <div class="d-flex mb-3">
        <label for="id_gst_rate" class="item-form" >GST
            <select class="" name="gst_rate" required id="id_gst_rate">
                {% if form.instance.id %}
                {% for x in Purchase_gst %}
                <option value="{{x.id}}">{{x.gst_percentage}}</option>
                {% endfor %}
                {% elif not form.instance.id %}
                <option value=""></option>
                {% endif %}
                {% for x in Purchase_gst %}
                <option value="{{x.id}}">{{x.gst_percentage}}</option>
                {% endfor %}
            </select>
        </label>
        <input type="number" class="item-select" name="" value="" id="id_gst" readonly>
    </div>
    <div class="d-flex mb-3">
        <label for="id_grand_total" class="item-form" >Grand total</label>
          <input type="text" class="item-select" name="grand_total" value="{{form.instance.grand_total}}" id="id_grand_total" readonly >
    </div>
</div>

 </form>
 
{% endblock body %}
