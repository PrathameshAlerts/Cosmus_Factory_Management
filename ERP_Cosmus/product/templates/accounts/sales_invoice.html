{% extends 'product/base.html' %} 
{% load static %} 

{% block body %} 
<div>
        <h2>Sales invoice</h2>
      <form class="mt-5" action="" method="POST">
           {% csrf_token %}
           <div class="d-flex mb-3">
            <label for="" class="form-label px-2">Type:</label>
            <select>
                <option>Raw Material</option>
                <option>Finish Goods</option>
            </select>
          </div>
       <div class="d-flex mb-3">
      <label for="" class="form-label px-2">Sales No:</label>
      <input type="number" class="item-select mx-3" value="" name="" maxlength="50" required id="">
    </div>
    <div class="d-flex mb-3">
        <label for="" class="form-label px-2">Sales Ledger:</label>
        <input type="number" class="item-select mx-3" value="" name="" maxlength="50" required id="">
      </div>
    <div class="d-flex mb-3">
      <label for="" class="form-label px-2">Party A/C Name: </label>
      <input type="text" class="item-select mx-3" value="" name="" maxlength="50" required id="">
    </div>

    <table class="table table-striped table-hover table-responsive">
      <thead>
        <tr>
          <th>Item Names</th>
          <th>Color /Shade</th>
          <th>SKU</th>
          <th>Category</th>
          <th>QTY</th>
          <th>Per</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1680 Arpan</td>
          <td>Navy</td>
          <td>Shades-2</td>
          <td> 1,255.00 </td>
          <td> 600.00 </td>
          <td>Meter</td>
          <td> 7,53,000.00 dr</td>
        </tr>
        
      </tbody>
    </table>

    <table class="table table-striped table-hover table-responsive">
      <thead>
        <tr>
          <th>Model Name</th>
          <th>Color</th>
          <th>SKU No</th>
          <th>Qty</th>
          <th>MRP</th>
          <th>CP/units</th>
          <th>Treder Discount</th>
          <th>Spl Dlr Discount</th>
          <th>Net Price</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1680 Arpan</td>
          <td>Navy</td>
          <td>544554</td>
          <td>10pc</td>
          <td>3055</td>
          <td>1599</td>
          <td>40% </td>
          <td>15%<td>
          <td></td>
        </tr>
        
      </tbody>
    </table>
    <div class="table-left">
      <div class="d-flex mb-3  text-bold">
        <p>Gross Total</p>
        <span id="grossTotal" class="fw-bold px-2"></span>
    </div>
    <div class="d-flex mb-3 text-bold ">
        <p>Spl Dic  3%</p>
        <span id="splTotal" class="fw-bold px-2"></span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3 text-bold">
        <p>Grand Total</p>
        <span id="grandValue" class="fw-bold px-2"></span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3">
        <p>Taxable Value</p>
        <span id="taxableValue" class="fw-bold px-2"></span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3">
        <p>CGST 9%</p>
      </p>
        <span id="cgstValue" class="fw-bold px-2">1048.55</span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3">
        <p>SGST 9%</p>
        <span id="sgstValue" class="fw-bold px-2">1048.55</span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3 text-bold">
        <p>Net Total Rs</p>
        <span id="netTotalValue" class="fw-bold px-2"></span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3">
        <p>Add:- </p>
        <p>Frieght </p>
        <span id="frieghtValue" class="fw-bold px-2">150.00</span>
    </div>
    <div class="table-left">
      <div class="d-flex mb-3 text-bold">
        <p>Net Payable Rs </p>
        <span id="netValue" class="fw-bold px-2"></span>
    </div>

    <input type="submit" class="create-btn mt-4" name="save" value="Save">
    <input type="submit" class="create-btn" name="save_and_add_another" value="Save and Add Another">
   <button type="button" class="create-btn"><a  class="text-decoration-none text-white" href="">Return</a></button>
  </div>
  <script>
    function calculateValues() {
      var qty = parseInt(document.getElementById('qty').innerText); // Extracting Qty
      var mrp = parseInt(document.getElementById('mrp').innerText); // Extracting MRP
      var grossTotal = qty * mrp; // Calculating Gross Total

      // Updating HTML elements with calculated values
      document.getElementById('grossTotal').innerText = grossTotal;
    }
  </script>
  <script>
    // Extracting values from the table
var MRP = 3055; // Example MRP
var Qty = 10; // Example Quantity
var traderDiscount = 0.40; // 40%
var specialDealerDiscount = 0.15; // 15%
var freight = 150; // Freight amount

// Calculating Total Price after Discounts
var totalAfterDiscounts = MRP * (1 - traderDiscount) * (1 - specialDealerDiscount) * Qty;

// Calculating Gross Total
var grossTotal = totalAfterDiscounts;

// Calculating Special Discount (3% of Gross Total)
var specialDiscount = 0.03 * grossTotal;

// Calculating Grand Total
var grandTotal = grossTotal - specialDiscount;

// Calculating Taxable Value (if available)

// Calculating CGST and SGST (assuming 9% each)
var cgstValue = 0.09 * grandTotal;
var sgstValue = 0.09 * grandTotal;

// Calculating Net Total
var netTotal = grandTotal + cgstValue + sgstValue;

// Calculating Net Payable
var netPayable = netTotal + freight;

// Assigning the calculated values to the corresponding HTML elements
document.getElementById("grossTotal").innerText = grossTotal.toFixed(2);
document.getElementById("splTotal").innerText = specialDiscount.toFixed(2);
document.getElementById("grandValue").innerText = grandTotal.toFixed(2);
document.getElementById("taxableValue").innerText = ""; // If available, calculate and assign the value here
document.getElementById("cgstValue").innerText = cgstValue.toFixed(2);
document.getElementById("sgstValue").innerText = sgstValue.toFixed(2);
document.getElementById("netTotalValue").innerText = netTotal.toFixed(2);
document.getElementById("frieghtValue").innerText = freight.toFixed(2);
document.getElementById("netValue").innerText = netPayable.toFixed(2);

  </script>
{% endblock body %}
