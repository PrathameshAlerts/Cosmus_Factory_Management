{% extends 'product/base.html' %}
{% load static %}
{% block body %}

<div class="row mt-3">
    <div class="col-lg-12">
        <div class="">
            <table class="table table-striped table-hover table-bordered">
                <thead class="name_absolute sticky-top">
                    <tr>
                        <th>No</th>
                        <th>Cutting Name</th>
                        <th>Purchase Order No </th>
                        <th>Cutting ID </th>
                        <th>Material Name </th>
                        <th>Color Name</th>
                        <th>Quantity</th>
                        <th>View</th>
                    </tr>
                </thead>

                <tbody class="mainTableList text-nowrap" style="max-height: 600px; overflow-y: auto;">
                    {% for qty in cutting_room_items %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>{{qty.purchase_order_cutting.factory_employee_id.factory_emp_name}}</td>
                        <td>{{qty.purchase_order_cutting.purchase_order_id.purchase_order_number}}</td>
                        <td>{{qty.purchase_order_cutting.raw_material_cutting_id}}</td>
                        <td>{{qty.material_name}}</td>
                        <td>{{qty.material_color_shade}}</td>
                        <td>{{qty.total_comsumption_in_cutting}}</td>
                        <td><button class="border-0 bg-transparent viewBtn"><a  href="{% url 'purchase-order-cutting-update' qty.purchase_order_cutting.purchase_order_id.id qty.purchase_order_cutting.purchase_order_id.product_reference_number.Product_Refrence_ID qty.purchase_order_cutting.raw_material_cutting_id  %}"><i class="fa-solid fa-eye px-1"></i></a></button></td>
                    </tr> 
                    {% endfor %}
                </tbody>


            </table>
        </div>
    </div>
</div>

<!-- <div class="modal fade" id="exampleModalSpinner" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-transparent border-0">
      <div class="modal-body justify-content-center text-center">
        <img src="../../../static/images/Gear.png" alt="loading..." height="120px" width="120px">
        </div>
        </div>
    </div> 
</div>  -->
<!-- <script>
     document.body.appendChild(document.getElementById('exampleModalSpinner'));
    document.addEventListener('DOMContentLoaded', function() {
  let statePushed = false;  // Flag to prevent multiple pushState calls

  // Show spinner on button click
  $('.viewBtn').click(function() {
    var newSpinner = $('#exampleModalSpinner');
    newSpinner.modal('show');  // Show the modal with the spinner

    // Only push state the first time the spinner is shown
    if (!statePushed) {
      history.pushState(null, null, location.href);
      statePushed = true;  // Set flag to true after pushing state
    }
  });

  // Hide spinner when back button or browser left arrow is clicked
  window.addEventListener('popstate', function() {
    var newSpinner = $('#exampleModalSpinner');
    console.log("popstate");
    if (newSpinner.hasClass('show')) {
      newSpinner.modal('hide');  // Hide the spinner modal
      statePushed = false;  // Reset flag to allow pushState on next navigation
    }
  });
});

</script> -->

{% endblock %}