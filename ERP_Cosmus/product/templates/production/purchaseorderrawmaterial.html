{% extends 'product/base.html' %} 
{% load static %} 
{% block body %}

<div class="" >
    <form method="POST">
        {% csrf_token %}
    <h4 class="mt-2">Purchase Order raw material</h4>
    <div class="row">
        <div class="col-lg-6 mt-2">
            <div style="border: 3px solid rgb(165, 164, 164); padding: 10px; border-radius: 5px;">
                <div class="d-flex">
                    <div class="d-flex mb-2">
                        <lable for="id_purchase_order_number" class="">Order Number:</lable>
                        <input type="number" name="purchase_order_number" class="purchase-amount border-0 bg-transparent text-danger ms-3 me-5" value="{{form.instance.purchase_order_number | default_if_none:''}}" required id="id_purchase_order_number" readonly>
                    </div>
                    <div class="d-flex ">
                        <lable for="id_product_reference_number" class="">Reference Number:</lable>
                        <input type="number" name="purchase_order_number" class="purchase-amount  border-0 bg-transparent text-danger" value="{{form.instance.product_reference_number.Product_Refrence_ID}}" id="id_purchase_order_number" readonly>
                    </div>
                    
                </div>
                <div class="d-flex mb-3">
                    <div class="d-flex">
                        <label for="id_ledger_party_name" class="">Party name:</label>
                        <input name="ledger_party_name" class="item-select border-0 bg-transparent text-danger ms-3 me-5" id="id_ledger_party_name" value="{{form.instance.ledger_party_name.name}}" readonly>
                      </div>
                   
                      <diV class="d-flex">
                        <lable for="id_model_name" class="">Model Name : </lable> 
                        <input class="text-danger purchase-amount border-0 bg-transparent" id="id_model_name"value="{{model_name | default_if_none:''}}">
                      </diV>
                </div>
                <div class="d-flex">
                    <div class="d-flex">
                        <label for="id_number_of_pieces" class="">No Of pieces:</label>
                        <input type="number" name="number_of_pieces" class="purchase-input border-0 bg-transparent text-danger ms-3 me-5 "  value="{{form.instance.number_of_pieces}}" required id="id_number_of_pieces" readonly>
                      </div> 
                      <div class="d-flex ">
                        <label for="id_target_date" class="">Target date:</label>
                        <input type="date" name="target_date" class="border-0 bg-transparent text-danger" value="{{ form.instance.target_date|date:'Y-m-d' }}" required id="id_target_date" readonly>  
                      </div> 
                </div>
            </div>
            
        </div>
    
        <div class="col-lg-5">
         
                <table class="table table-striped table-hover table-bordered tables" id="productTable" >
                    <thead class="name_absolute text-nowrap">
                        <tr>
                            <th>Product Sku</th>
                            <th>Color</th>
                            <th>Order Qty</th>
                            <th>Process Qty</th>
                        </tr>
                    </thead>
                    <tbody class="mainTableList">
                        {{formset.management_form}}
                        {% for form in purchase_order_raw_formset %}
                        {{form.id}}
                        <tr class="text-nowrap">
                            <td>
                                <input type="text" class="productorder_input" name="{{form.prefix}}-product_id" value="{{form.instance.product_id.PProduct_SKU | default_if_none:''}}" id="id_{{form.prefix}}-product_id" readonly>
                            </td>
                            <td>
                                <input type="text" class="productorder_input" name="{{forloop.counter0}}-product_color" value="{{form.instance.product_id.PProduct_color | default_if_none:''}}" id="id_{{forloop.counter0}}-product_color" readonly>
                            </td>
                            <td>
                                <input type="number" class="productorderrawqty-input" name="{{form.prefix}}-order_quantity" value="{{form.instance.order_quantity|default_if_none:'0'}}" id="id_{{form.prefix}}-order_quantity" readonly>
                            </td>
                            <td>
                                <input type="number" class="productorderqty-input" name="{{form.prefix}}-process_quantity" value="0" id="id_{{form.prefix}}-process_quantity">
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
    </div>
    <div class="row mt-2">
                <div class="col-lg-12">
                    <div class="tables-form">
                        <table class="table table-striped table-hover table-bordered" >
                            <thead class="name_absolute sticky-top border-1">
                            <tr>
                                <th>Product SKU</th>
                                <th>Material Name</th>
                                <th>Rate</th>
                                <th>Panha</th>
                                <th>Units</th>
                                <th>G-Total</th>
                                <th>Comsumption</th>
                                <th>Total Comsumption</th>
                                <th>Physical Stock</th>
                                <th>Balance Physical Stock</th>
                            </tr>
                        </thead>
                        <tbody class="mainTableList" style="max-height: 450px; overflow-y: auto;">
                            {{purchase_order_raw_sheet_formset.management_form}}
                            {% for form in purchase_order_raw_sheet_formset %}
                           {{form.as_p}}
                            {% endfor %}
                        </tbody>
                        </table>
                    </div>
                    
              
            </div>
    </div>
    <input type="submit" class="create-btn mt-2 mb-4 mx-3" name="submit-form" value="Submit" id="id_submit">
    {% if form.instance.id %}
    <button type="button" class="add_btn " name="Back-form" value="Back" id="back"><a href="{% url 'purchase-order-update' form.instance.id %}">Back</a></button>

{% endif %}
</form>
</div>


{% endblock %}


