{% extends 'product/base.html' %} 
{% load static %} 
{% block body %}



<div class="">
    <div class="d-flex">
        <div class="d-flex mb-3">
            <lable for="id_purchase_order_number" class="">Order Number:</lable>
            <input type="number" name="purchase_order_number" class="purchase-amount ms-2 me-4" value="{{form.instance.purchase_order_number | default_if_none:''}}" required id="id_purchase_order_number" readonly>
        </div>
        <div class="d-flex mb-3">
            <lable for="id_product_reference_number" class="">Reference Number:</lable>
            <input type="number" name="purchase_order_number" class="purchase-amount ms-2 me-4" value="{{form.instance.product_reference_number.Product_Refrence_ID}}" required id="id_purchase_order_number" readonly>
        </div>
        <div class="d-flex mb-3">
            <label for="id_ledger_party_name" class="item-form">Ledger party name:</label>
            <input name="ledger_party_name" class="item-select" id="id_ledger_party_name" value="{{form.instance.ledger_party_name.name}}" readonly>
            
          </div>
    </div>
    <div class="d-flex">
        <div class="d-flex mb-3">
            <label for="id_target_date" class="">Target date:</label>
            <input type="date" name="target_date" class="item-select ms-2 me-4" value="{{ form.instance.target_date|date:'Y-m-d' }}" required id="id_target_date" readonly>  
          </div> 
          <div class="d-flex mb-3">
            <label for="id_number_of_pieces" class="item-form ">Number of pieces:</label>
            <input type="number" name="number_of_pieces" class="item-select"  value="{{form.instance.number_of_pieces}}" required id="id_number_of_pieces" readonly>
          </div> 
    </div>
      
    <div>
        <form method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-5">
                    <table class="table table-striped table-hover table-bordered tables" id="productTable" >
                        <thead class="name_absolute text-nowrap">
                            <tr>
                                <th>Product Sku</th>
                                <th>Color</th>
                                <th>Order Qty</th>
                                <th>Process Qty</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody class="mainTableList">
                            {{formset.management_form}}
                            {% for form in purchase_order_raw_formset %}
                            {{form.id}}
                            <tr class="text-nowrap">
                                <td>
                                    <input type="text" class="productorder_input" name="{{form.prefix}}-product_id" value="{{form.instance.product_id.PProduct_SKU | default_if_none:''}}" id="id_{{form.prefix}}-product_id" readonly>
                                </td>
                                <td>
                                    <input type="text" class="productorder_input" name="{{forloop.counter0}}-product_color" value="{{form.instance.product_id.PProduct_color | default_if_none:''}}" id="id_{{forloop.counter0}}-product_color" readonly>
                                </td>
                                <td>
                                    <input type="number" class="productorderrawqty-input" name="{{form.prefix}}-order_quantity" value="{{form.instance.order_quantity|default_if_none:'0'}}" id="id_{{form.prefix}}-order_quantity" readonly>
                                </td>
                                <td>
                                    <input type="number" class="productorderqty-input" name="{{form.prefix}}-process_quantity" value="0" id="id_{{form.prefix}}-process_quantity">
                                </td>
                                <td><span class="delete-btn border-0 bg-transparent" style="cursor: pointer;"><i class="fa-solid fa-trash text-danger px-3 "><input type="checkbox" class="godown_delete px-2" style="display: none;"   name="{{form.prefix}}-DELETE" id="id_{{form.prefix}}-DELETE" value="" ></i></span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                </div>
            </div>
            <input type="submit" class="create-btn mt-4 mx-3" name="submit-form" value="Submit" id="id_submit">


            <table>
                <tr>
                <th>Product SKU</th>
                <th>Material Name</th>
                <th>Rate</th>
               <th>Panha</th>
                <th>Units</th>
                <th>G-Total</th>
                <th>Comsumption</th>
                <th>Total Comsumption</th>
                <th>Physical Stock</th>
                <th>Balance Physical Stock</th>
            </tr>
            {% for product_item in prod_to_items %}
                <tr>
                    <td>{{product_item.PProduct_pk.PProduct_SKU}}</td>
                    <td>{{product_item.Item_pk.item_name}}</td>
                    <td>NA</td>
                    <td>{{product_item.Item_pk.Panha}}</td>
                    <td>{{product_item.Item_pk.Units}}</td>
                    <td>{{product_item.grand_total}}</td>
                    <th>NA</th>
                    <th>NA</th>
                    <th>NA</th>
                    <th>NA</th>
                </tr>
                {% endfor %}

            </table>



          </form>
        
    </div>
</div>
{% if form.instance.id %}
<a href="{% url 'purchase-order-update' form.instance.id %}">Back</a>
{% endif %}

{% endblock %}


