{% extends 'product/base.html' %}
{% load static %}
{% block body %}


<div>

    <table class="table table-striped table-hover table-bordered">
        <thead class="name_absolute sticky-top">
            <tr>
                <th>No</th>
                <th>GRN No</th>
                <th>labour name</th>
                <th>Issues Pcs</th>
                <th>Return Pcs</th>
                <th>Balance Pcs</th>
                <th>approve</th>
            </tr>
        </thead>
          
        <tbody class="mainTableList text-nowrap" style="max-height: 450px; overflow-y: auto;">
            
            {% for record in labour_workin_instances %}
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{record.voucher_number}}</td>
                <td>{{record.labour_voucher_number.labour_name.name}}</td>
                <td>{{record.labour_voucher_number.total_process_pcs}}</td>
                <td>{{record.total_return_pcs}}</td>
                <td>{{record.total_balance_pcs}}</td>
                <td><button class="border-0 bg-transparent btnValue" onclick="approvedGoodsReturn(this)"><a class="approved-btn" ><i class="fa-regular fa-thumbs-up ps-3 fs-5"></i></a></button></td>
                <input type="hidden" name = "labour_work_in" value="{{record.id}}">
            </tr>
            {% endfor %}
        </tbody>
    </table>


</div>

<script>
    var popupPage = null;
function approvedGoodsReturn(button){
    if (popupPage === null || popupPage.closed) {
      newPopup(button, 'goodsreturnpopup/')
    } else {
      popupPage.focus();
    }
}


  function newPopup(button, path) {
 
    var goodsId = $(button).closest('tr').find('input').val();
   
    var minWidth = 800; // minimum width
    var minHeight = 600;


    // this will generate http://127.0.0.1:8000/ 
    var baseUrl = "{{ request.scheme }}://{{ request.get_host }}/";
    popupPage = window.open(baseUrl + path + goodsId, '_blank', 'width=' + minWidth + ', height=' + minHeight + ', resizable=yes');

   
  }
</script>
{% endblock %}