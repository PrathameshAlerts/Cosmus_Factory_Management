{% extends 'product/base.html' %}
{% load static %}
{% block body %}

<div class="mt-2 row">
    <div class="col-lg-6 mb-3">
        <label class="fw-bold">Ref No :</label><span class="text-danger ms-2 refId fw-bold">{{reference_no}}</span>
        <label class="fw-bold ms-3">Model Name :</label><span class="text-danger ms-2 fw-bold">{{product_instance.Model_Name}}</span>
        <label class="fw-bold ms-3">Total LWO :</label><span class="text-danger ms-2">{{total_labour_workout.total_process_pcs}}</span>
    </div>
    <div class="col-lg-6">
        <label class="fw-bold">Images :</label>
        {%  for img in product_instance.productdetails.all %}
        <img src="{{img.PProduct_image.url}}" style="width: 60px; height: 60px; padding:2px; margin: 2px;">
        {% endfor %}
    </div>

</div>
<div class="mb-3 mt-2">
    <div class="row">
        <div class="col-lg-8">
            <table class="table table-striped table-hover table-bordered text-center">
                <thead class="name_absolute sticky-top">
                    <tr>
                        <th>GRN No / V No</th>
                        <th>Date</th>
                        <th>Description</th>
                        {% for header in SKU_List %}
                        <th class=" finshHeader">{{ header }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="mainTableList">
                    <tr>
                        <td></td>
                        <td></td>
                        <td>LWO</td>
                        {% for key,val in labour_workout_p_2_i.items %}
                        <td class="finishLwo">{{ val }}</td>
                        {% endfor %}
                    </tr>
                    {% for data in report_data_sorted %}
                    <tr>
                        <td>{{ data.GRN_No}}</td>
                        <td class="text-nowrap">{{ data.date}}</td>
                        <td>{{ data.description}}</td>
                        {% for key,val in data.sku_qty.items %}
                        <td class="finishLwi">{{ val }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
                <tbody class="mainTableList">
                    <tr>
                        <td colspan="2"></td>
                        <td class="text-center"><b>Total</b></td>
                        {% for key,val in result_dict.items %}
                        <td class="fw-bold" >{{ val }}</td>  
                        {% endfor %}
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<script>

document.addEventListener("DOMContentLoaded",function(){
    function colorChanges(){
        var header = document.querySelectorAll('.finshHeader');
        var Lwo = document.querySelectorAll('.finishLwo');
        var finishLwo = document.querySelectorAll('.finishLwi');
    console.log(finishLwo.length);
    for(var i=0; i< header.length; i++){
        if(i % 4 === 0){
            header[i].classList.add('bg-c-green');
            Lwo[i].style.backgroundColor = 'rgb(141 228 211)';
            finishLwo[i].style.backgroundColor = 'rgb(141 228 211)'
        }else if(i % 4 === 1){
            header[i].classList.add('bg-c-red');
            Lwo[i].style.backgroundColor = 'rgb(233 130 127)';
            finishLwo[i].style.backgroundColor = 'rgb(233 130 127)';
        }else if(i % 4 === 2){
            header[i].classList.add('bg-c-yellow');
            Lwo[i].style.backgroundColor = 'rgb(237 189 122)';
            finishLwo[i].style.backgroundColor = 'rgb(237 189 122)';
        }else{
            header[i].classList.add('bg-c-purple');
            Lwo[i].style.backgroundColor = '#a18ee3';
            finishLwo[i].style.backgroundColor = '#a18ee3';
        }
    }
    }
    colorChanges()
})


</script>

{% endblock body %}